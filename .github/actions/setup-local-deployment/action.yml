name: Setup OpenVidu Local Deployment
description: Checkout and start OpenVidu Local Deployment with Docker Compose
runs:
  using: "composite"
  steps:
    - name: Checkout OpenVidu Local Deployment
      uses: actions/checkout@v4
      with:
        repository: OpenVidu/openvidu-local-deployment
        ref: development
        path: openvidu-local-deployment

    - name: Configure Local Deployment
      shell: bash
      run: |
        cd openvidu-local-deployment/community
        ./configure_lan_private_ip_linux.sh
        docker compose up -d

    - name: Wait for OpenVidu Local Deployment to Start
      shell: bash
      run: wait-on --timeout 60000 http://localhost:7880
