name: Setup OpenVidu Meet Backend
description: Prepara y arranca el backend de OpenVidu Meet y espera a que est√© disponible
runs:
  using: "composite"
  steps:
    - name: Setup yarn # Needed for the redlock package
      shell: bash
      run: npm install -g yarn
    - name: Checkout OpenVidu Meet
      uses: actions/checkout@v4
    - name: Prepare OpenVidu Meet
      shell: bash
      run: |
        ./prepare.sh
        cd backend
        npm run start:prod &
    - name: Wait for OpenVidu Meet to Start
      shell: bash
      run: wait-on --timeout 30000 http://localhost:6080/meet/health
