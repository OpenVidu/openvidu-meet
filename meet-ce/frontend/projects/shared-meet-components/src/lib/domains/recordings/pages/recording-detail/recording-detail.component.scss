@use '../../../../../../../../src/assets/styles/design-tokens' as *;

.ov-page-container {
	overflow: hidden;
}

// =====================
// Loading State
// =====================

.ov-page-loading {
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: 60vh;
	padding: var(--ov-meet-spacing-xl);

	.loading-content {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: var(--ov-meet-spacing-lg);
		text-align: center;

		.loading-title {
			display: flex;
			align-items: center;
			gap: var(--ov-meet-spacing-sm);

			.loading-icon {
				@include ov-icon(xl);
				opacity: 0.4;
			}

			h1 {
				margin: 0;
				font-size: var(--ov-meet-font-size-xl);
				font-weight: var(--ov-meet-font-weight-regular);
				color: var(--ov-meet-text-primary);
			}
		}

		.loading-subtitle {
			margin: 0;
			color: var(--ov-meet-text-secondary);
			font-size: var(--ov-meet-font-size-sm);
		}
	}
}

// =====================
// Error State
// =====================

.error-container {
	display: flex;
	align-items: center;
	justify-content: center;
	min-height: 60vh;
	padding: var(--ov-meet-spacing-xl);

	.error-content {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: var(--ov-meet-spacing-md);
		text-align: center;
		max-width: 480px;

		.error-icon {
			@include ov-icon(xl);
			color: var(--ov-meet-color-error);
			opacity: 0.7;
		}

		.error-title {
			margin: 0;
			font-size: var(--ov-meet-font-size-xl);
			font-weight: var(--ov-meet-font-weight-medium);
			color: var(--ov-meet-text-primary);
		}

		.error-message {
			margin: 0;
			color: var(--ov-meet-text-secondary);
			font-size: var(--ov-meet-font-size-sm);
		}

		.error-actions {
			display: flex;
			gap: var(--ov-meet-spacing-sm);
		}
	}
}

// =====================
// Page Header
// =====================

.page-header {
	@include ov-page-header;

	.header-top {
		margin-bottom: var(--ov-meet-spacing-sm);
	}

	.header-content {
		display: flex;
		flex-direction: column;
		gap: var(--ov-meet-spacing-md);

		@media (min-width: 768px) {
			flex-direction: row;
			align-items: center;
			justify-content: space-between;
		}
	}

	.title-section {
		display: flex;
		flex-direction: column;
		gap: var(--ov-meet-spacing-sm);

		@media (min-width: 768px) {
			flex-direction: row;
			align-items: center;
		}

		h1 {
			margin: 0;
			font-size: var(--ov-meet-font-size-xxl);
			font-weight: var(--ov-meet-font-weight-regular);
			color: var(--ov-meet-text-primary);
		}
	}

	.status-badge {
		display: inline-flex;
		align-items: center;
		gap: var(--ov-meet-spacing-xs);
		padding: var(--ov-meet-spacing-xs) var(--ov-meet-spacing-sm);
		border-radius: var(--ov-meet-radius-md);
		font-size: var(--ov-meet-font-size-xs);
		font-weight: var(--ov-meet-font-weight-semibold);
		text-transform: uppercase;
		width: fit-content;
		background-color: color-mix(in srgb, currentColor 10%, transparent);

		.status-icon {
			@include ov-icon(sm);
		}
	}

	.actions {
		display: flex;
		flex-wrap: wrap;
		gap: var(--ov-meet-spacing-sm);
		align-items: center;

		.action-btn {
			@include ov-button-base;
			display: flex;
			align-items: center;
			gap: var(--ov-meet-spacing-xs);

			mat-icon {
				@include ov-icon(sm);
			}

			span {
				display: none;

				@media (min-width: 768px) {
					display: inline;
				}
			}
		}

		.icon-action-btn {
			@include ov-theme-transition;
			border: 1px solid var(--ov-meet-border-color);
			border-radius: var(--ov-meet-radius-sm);

			mat-icon {
				@include ov-icon(sm);
			}

			&.delete-btn {
				color: var(--ov-meet-color-error);

				&:hover {
					background-color: rgba(244, 67, 54, 0.1);
				}
			}
		}
	}
}

// =====================
// Key Stats Row
// =====================

.stats-card {
	background-color: var(--ov-meet-surface-container);
	margin-top: var(--ov-meet-spacing-lg);

	.stats-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: var(--ov-meet-spacing-md);

		@media (min-width: 768px) {
			grid-template-columns: repeat(4, 1fr);
		}

		.stat-item {
			display: flex;
			align-items: flex-start;
			gap: var(--ov-meet-spacing-sm);
			padding: var(--ov-meet-spacing-sm) 0;

			.stat-icon {
				@include ov-icon(md);
				color: var(--ov-meet-color-primary);
				flex-shrink: 0;
				margin-top: 2px;
			}

			.stat-body {
				display: flex;
				flex-direction: column;
				gap: 2px;
				min-width: 0;

				.stat-label {
					font-size: var(--ov-meet-font-size-xs);
					font-weight: var(--ov-meet-font-weight-semibold);
					color: var(--ov-meet-text-secondary);
					text-transform: uppercase;
					letter-spacing: 0.05em;
					margin: 0;
				}

				.stat-value {
					font-size: var(--ov-meet-font-size-sm);
					font-weight: var(--ov-meet-font-weight-medium);
					color: var(--ov-meet-text-primary);
					margin: 0;
					white-space: nowrap;
					overflow: hidden;
					text-overflow: ellipsis;
				}

				// Navigable room name link inside the stat
				.room-link {
					display: inline-flex;
					align-items: center;
					gap: 2px;
					color: var(--ov-meet-color-primary);
					text-decoration: none;
					@include ov-theme-transition;

					.nav-icon {
						@include ov-icon(xs);
						opacity: 0.7;
					}

					&:hover {
						text-decoration: underline;
						opacity: 0.85;
					}
				}
			}
		}
	}
}

// =====================
// Two-column body
// =====================

.body-columns {
	display: grid;
	grid-template-columns: 1fr;
	gap: var(--ov-meet-spacing-lg);
	margin-top: var(--ov-meet-spacing-lg);
	align-items: start;

	@media (min-width: 900px) {
		grid-template-columns: 1fr 2fr;
	}

	// ---- Info Card ----
	.info-card {
		@include ov-card;

		mat-card-header {
			padding-bottom: var(--ov-meet-spacing-sm);

			mat-card-title {
				display: flex;
				align-items: center;
				gap: var(--ov-meet-spacing-xs);
				font-size: var(--ov-meet-font-size-md);
				font-weight: var(--ov-meet-font-weight-semibold);
				color: var(--ov-meet-text-primary);

				.card-title-icon {
					@include ov-icon(md);
					color: var(--ov-meet-color-primary);
				}
			}
		}

		.info-list {
			display: flex;
			flex-direction: column;

			.info-row {
				display: flex;
				flex-direction: column;
				gap: 2px;
				padding: var(--ov-meet-spacing-xs) 0;
				border-bottom: 1px solid var(--ov-meet-border-color);

				&:last-child {
					border-bottom: none;
				}

				.info-label {
					font-size: var(--ov-meet-font-size-xs);
					font-weight: var(--ov-meet-font-weight-semibold);
					color: var(--ov-meet-text-secondary);
					text-transform: uppercase;
					letter-spacing: 0.05em;
					margin: 0;
				}

				.info-value {
					font-size: var(--ov-meet-font-size-sm);
					color: var(--ov-meet-text-primary);
					margin: 0;
					font-weight: var(--ov-meet-font-weight-medium);
					word-break: break-word;

					&.monospace {
						font-family: 'Courier New', monospace;
						font-size: var(--ov-meet-font-size-xs);
						color: var(--ov-meet-text-secondary);
						word-break: break-all;
					}

					&.error-text {
						color: var(--ov-meet-color-error);
					}
				}

				.info-value-wrap {
					display: flex;
					align-items: center;
					gap: var(--ov-meet-spacing-xs);

					.copy-btn {
						width: 24px;
						height: 24px;
						line-height: 24px;
						flex-shrink: 0;

						mat-icon {
							@include ov-icon(xs);
						}
					}
				}
			}
		}

		.divider {
			margin: var(--ov-meet-spacing-md) 0;
		}

		.error-block {
			display: flex;
			flex-direction: column;
			gap: var(--ov-meet-spacing-sm);

			.error-row {
				display: flex;
				align-items: flex-start;
				gap: var(--ov-meet-spacing-sm);

				.error-icon-sm {
					@include ov-icon(md);
					color: var(--ov-meet-color-error);
					flex-shrink: 0;
					margin-top: 2px;
				}

				.info-label {
					font-size: var(--ov-meet-font-size-xs);
					font-weight: var(--ov-meet-font-weight-semibold);
					color: var(--ov-meet-text-secondary);
					text-transform: uppercase;
					letter-spacing: 0.05em;
					margin: 0 0 2px;
				}

				.info-value {
					font-size: var(--ov-meet-font-size-sm);
					color: var(--ov-meet-text-primary);
					margin: 0;
					font-weight: var(--ov-meet-font-weight-medium);

					&.error-text {
						color: var(--ov-meet-color-error);
					}
				}
			}
		}
	}
}
