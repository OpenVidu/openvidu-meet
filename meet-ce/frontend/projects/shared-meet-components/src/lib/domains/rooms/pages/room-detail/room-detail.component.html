<!-- Loading State -->
@if (isLoading()) {
	<div class="ov-page-loading">
		<div class="loading-content">
			<div class="loading-header">
				<div class="loading-title">
					<mat-icon class="ov-room-icon loading-icon">video_chat</mat-icon>
					<h1>Loading Room Details</h1>
				</div>
				<p class="loading-subtitle">Please wait while we fetch the room information...</p>
			</div>

			<div class="loading-spinner-container">
				<mat-spinner diameter="48"></mat-spinner>
			</div>
		</div>
	</div>
}

@if (!isLoading() && room()) {
	<div class="ov-page-container ov-mb-xxl">
		<!-- Room Detail Header -->
		<div class="page-header">
			<div class="header-top">
				<!-- Breadcrumb -->
				<ov-breadcrumb [items]="breadcrumbItems()"></ov-breadcrumb>
			</div>

			<div class="header-content">
				<div class="title-section">
					<div class="title">
						<mat-icon class="ov-room-icon">video_chat</mat-icon>
						<h1>{{ room()?.roomName }}</h1>
					</div>

					<!-- Status Badge -->
					<div class="status-badge" [style.color]="RoomUiUtils.getStatusColor(room())">
						<span class="status-dot" [style.background-color]="RoomUiUtils.getStatusColor(room())"></span>
						<span class="status-text">{{ RoomUiUtils.getStatusLabel(room()!) }}</span>
					</div>
				</div>

				<!-- Action Buttons -->
				<div class="actions">
					<button
						mat-flat-button
						color="primary"
						class="action-btn primary-btn"
						(click)="joinRoom()"
						matTooltip="Join the room"
					>
						<mat-icon>play_arrow</mat-icon>
						<span>Join Room</span>
					</button>

					<button
						mat-stroked-button
						class="action-btn"
						(click)="copyAccessLink()"
						matTooltip="Copy access link to clipboard"
					>
						<mat-icon>link</mat-icon>
						<span>Copy Link</span>
					</button>

					<button
						mat-icon-button
						class="icon-action-btn"
						(click)="editRoom()"
						matTooltip="Edit room configuration"
					>
						<mat-icon>edit</mat-icon>
					</button>

					<button
						mat-icon-button
						class="icon-action-btn delete-btn"
						(click)="deleteRoom()"
						matTooltip="Delete room"
					>
						<mat-icon>delete</mat-icon>
					</button>
				</div>
			</div>
		</div>

		<!-- Room Information Section -->
		<div class="page-content">
			<mat-card class="info-card">
				<mat-card-content>
					<div class="info-grid">
						<!-- Room ID -->
						<div class="info-item">
							<p class="info-label">Room ID</p>
							<p class="info-value monospace">{{ room()?.roomId }}</p>
						</div>

						<!-- Owner -->
						<div class="info-item">
							<p class="info-label">Owner</p>
							<div class="owner-info">
								<div class="owner-avatar">
									<span>{{ RoomUiUtils.getOwnerInitials(room()!) }}</span>
								</div>
								<p class="info-value">{{ room()?.owner }}</p>
							</div>
						</div>

						<!-- Creation Date -->
						<div class="info-item">
							<p class="info-label">Creation Date</p>
							<p class="info-value">{{ RoomUiUtils.formatDate(room()!.creationDate) }}</p>
						</div>

						<!-- Auto-Deletion Status -->
						<div class="info-item">
							<p class="info-label">Auto-Deletion</p>
							<p class="info-value">{{ RoomUiUtils.getAutoDeletionDisplay(room()!) }}</p>
						</div>
					</div>
				</mat-card-content>
			</mat-card>
		</div>
	</div>
}
