@import '../../../../../../src/assets/styles/design-tokens';

// Modern Rooms Toolbar
.rooms-toolbar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0 var(--ov-meet-spacing-md) 0 0;
	margin-bottom: var(--ov-meet-spacing-md);
	min-height: 64px;
	gap: var(--ov-meet-spacing-md);

	.toolbar-left {
		display: flex;
		align-items: center;
		flex: 1;
		min-width: 0;

		.search-field {
			width: 100%;
			max-width: 400px;

			::ng-deep {
				.mat-mdc-form-field-subscript-wrapper {
					display: none;
				}

				.mdc-notched-outline {
					border-color: var(--ov-meet-border-light);
				}

				&.mat-focused .mdc-notched-outline {
					border-color: var(--ov-meet-color-primary);
				}
			}
		}
	}

	.toolbar-center {
		display: flex;
		align-items: center;
		gap: var(--ov-meet-spacing-lg);
		flex: 0 0 auto;

		.selection-info {
			display: flex;
			align-items: center;
			gap: var(--ov-meet-spacing-sm);
			padding: var(--ov-meet-spacing-sm) var(--ov-meet-spacing-md);
			background: var(--ov-meet-color-primary-light);
			border-radius: var(--ov-meet-radius-md);
			color: var(--ov-meet-color-primary);

			.selection-icon {
				@include ov-icon(md);
			}

			.selection-text {
				font-size: var(--ov-meet-font-size-sm);
				font-weight: var(--ov-meet-font-weight-medium);
			}
		}

		.batch-actions {
			display: flex;
			align-items: center;
			gap: var(--ov-meet-spacing-xs);

			button {
				@include ov-theme-transition;

				&[color='warn'] {
					color: var(--ov-meet-color-error);

					&:hover {
						background-color: var(--ov-meet-color-error-light);
					}
				}

				&:hover {
					background-color: var(--ov-meet-surface-hover);
				}
			}
		}
	}

	.toolbar-right {
		display: flex;
		align-items: center;
		flex: 0 0 auto;

		button {
			@include ov-theme-transition;

			&:hover {
				background-color: var(--ov-meet-surface-hover);
			}
		}

		.create-room-btn {
			@include ov-button-base;
		}
	}

	// Responsive design
	@include ov-tablet-down {
		padding: var(--ov-meet-spacing-sm) var(--ov-meet-spacing-md);
		gap: var(--ov-meet-spacing-sm);

		.toolbar-left {
			.search-field {
				max-width: 300px;
			}
		}

		.toolbar-center {
			gap: var(--ov-meet-spacing-md);

			.selection-info {
				padding: var(--ov-meet-spacing-xs) var(--ov-meet-spacing-sm);

				.selection-text {
					font-size: var(--ov-meet-font-size-xs);
				}
			}
		}
	}

	@include ov-mobile-down {
		flex-direction: column;
		align-items: stretch;
		gap: var(--ov-meet-spacing-sm);
		padding: var(--ov-meet-spacing-sm);

		.toolbar-left,
		.toolbar-center,
		.toolbar-right {
			justify-content: center;
		}

		.toolbar-left {
			.search-field {
				max-width: none;
			}
		}

		.toolbar-center {
			order: 3;
			flex-direction: column;
			gap: var(--ov-meet-spacing-sm);

			.selection-info {
				align-self: center;
			}

			.batch-actions {
				justify-content: center;
			}
		}

		.toolbar-right {
			order: 2;
		}
	}
}

// Filters Menu Styling
.filters-menu {
	::ng-deep .mat-mdc-menu-panel {
		min-width: 280px;
	}

	.filter-content {
		padding: var(--ov-meet-spacing-md);

		h4 {
			margin: 0 0 var(--ov-meet-spacing-md) 0;
			font-size: var(--ov-meet-font-size-sm);
			font-weight: var(--ov-meet-font-weight-semibold);
			color: var(--ov-meet-text-primary);
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}

		mat-form-field {
			width: 100%;

			::ng-deep {
				.mat-mdc-form-field-subscript-wrapper {
					display: none;
				}
			}
		}
	}
}

.loading-container {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: var(--ov-meet-spacing-xxl);
	gap: var(--ov-meet-spacing-md);
	background: var(--ov-meet-surface-elevated);
	border-radius: var(--ov-meet-radius-md);
	border: 1px solid var(--ov-meet-border-light);
	margin: var(--ov-meet-spacing-md) 0;

	span {
		color: var(--ov-meet-text-secondary);
		font-size: var(--ov-meet-font-size-sm);
	}

	mat-spinner {
		::ng-deep circle {
			stroke: var(--ov-meet-color-primary);
		}
	}
}

// Enhanced Table Container
.table-container {
	background-color: var(--ov-meet-surface-elevated);
	border-radius: var(--ov-meet-radius-md);
	box-shadow: var(--ov-meet-shadow-sm);
	overflow: hidden;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	border: 1px solid var(--ov-meet-border-light);
	margin-top: 0; // Remove top margin since toolbar is attached

	// Subtle glow effect when selections are active
	:host(.has-selections) & {
		box-shadow:
			var(--ov-meet-shadow-md),
			0 0 0 1px var(--ov-meet-color-primary-light);
	}

	@include ov-mobile-down {
		border-radius: var(--ov-meet-radius-sm);
		margin: 0 calc(-1 * var(--ov-meet-spacing-sm));
		border-left: none;
		border-right: none;
	}
}

// Toolbar + Table Integration
.rooms-toolbar + .table-container {
	border-top-left-radius: 0;
	border-top-right-radius: 0;
	border-top: none;
	box-shadow: var(--ov-meet-shadow-sm);
}

// Ensure proper spacing when no toolbar
:host:not(:has(.rooms-toolbar)) .table-container {
	margin-top: var(--ov-meet-spacing-md);
}

.rooms-table {
	width: 100%;

	// Header styles
	.mat-mdc-header-cell {
		background-color: var(--ov-meet-surface-variant);
		color: var(--ov-meet-text-primary);
		font-weight: var(--ov-meet-font-weight-medium);
		font-size: var(--ov-meet-font-size-sm);
		border-bottom: 1px solid var(--ov-meet-border-color);
		padding: var(--ov-meet-spacing-md) var(--ov-meet-spacing-sm);

		&.room-header {
			min-width: 200px;
		}

		&.status-header {
			min-width: 140px;
		}

		&.creation-date-header {
			min-width: 150px;
		}

		&.auto-deletion-header {
			min-width: 160px;
		}

		&.actions-header {
			width: 120px;
			text-align: center;
		}
	}

	// Cell styles
	.mat-mdc-cell {
		border-bottom: 1px solid var(--ov-meet-border-color-light);
		padding: var(--ov-meet-spacing-md) var(--ov-meet-spacing-sm);
		// vertical-align: top;

		&.room-cell {
			min-width: 200px;
		}

		&.status-cell {
			min-width: 140px;
		}

		&.creation-date-cell {
			min-width: 150px;
		}

		&.auto-deletion-cell {
			min-width: 160px;
		}

		&.actions-cell {
			width: 120px;
		}
	}

	// Row styles
	.mat-mdc-row {
		transition: background-color var(--ov-meet-transition-fast);

		&:hover {
			background-color: var(--ov-meet-surface-hover);
		}

		&.selected-row {
			background-color: rgba(25, 118, 210, 0.09);

			&:hover {
				background-color: rgba(25, 118, 210, 0.12);
			}
		}

		&.marked-for-deletion {
			background-color: rgba(244, 67, 54, 0.05);

			&:hover {
				background-color: rgba(244, 67, 54, 0.1);
			}
		}
	}
}

// Room information
.room-info {
	display: flex;
	flex-direction: column;
	gap: var(--ov-meet-spacing-xs);

	.room-id {
		font-weight: var(--ov-meet-font-weight-medium);
		color: var(--ov-meet-text-primary);
		font-size: var(--ov-meet-font-size-sm);
	}
}

// Status badge
.status-badge {
	display: flex;
	align-items: center;
	gap: var(--ov-meet-spacing-xs);
	padding: var(--ov-meet-spacing-xs) var(--ov-meet-spacing-sm);
	border-radius: var(--ov-meet-radius-sm);
	font-size: var(--ov-meet-font-size-xs);
	font-weight: var(--ov-meet-font-weight-medium);
	width: fit-content;

	.status-icon {
		@include ov-icon(sm);
	}

	.status-label {
		font-weight: var(--ov-meet-font-weight-semibold);
	}
}

// Date information
.date-info {
	display: flex;
	flex-direction: column;
	gap: var(--ov-meet-spacing-xs);

	.date {
		font-size: var(--ov-meet-font-size-sm);
		color: var(--ov-meet-text-primary);
	}

	.time {
		font-size: var(--ov-meet-font-size-xs);
		color: var(--ov-meet-text-secondary);
	}
}

// Auto-deletion information
.auto-deletion-info {
	display: flex;
	flex-direction: column;
	gap: var(--ov-meet-spacing-xs);

	.deletion-badge {
		display: inline-flex;
		align-items: center;
		gap: var(--ov-meet-spacing-xs);
		padding: var(--ov-meet-spacing-xs) var(--ov-meet-spacing-sm);
		border-radius: var(--ov-meet-radius-sm);
		font-size: var(--ov-meet-font-size-xs);
		font-weight: var(--ov-meet-font-weight-medium);
		width: fit-content;
		vertical-align: middle;
		text-transform: uppercase;

		.deletion-icon {
			@include ov-icon(sm);
		}
	}

	.deletion-date {
		font-size: var(--ov-meet-font-size-sm);
		color: var(--ov-meet-text-primary);
	}

	.deletion-time {
		font-size: var(--ov-meet-font-size-xs);
		color: var(--ov-meet-text-secondary);
	}

	.auto-deletion-pending {
		// background-color: var(--ov-meet-text-disabled)
		color: var(--ov-meet-color-warn);
		// border: 1px solid var(--ov-meet-color-warning);
		.deletion-icon {
			color: var(--ov-meet-color-warn);
		}
	}

	.auto-deletion-not-scheduled {
		color: var(--ov-meet-text-hint);
		// border: 1px solid var(--ov-meet-border-color-light);
		.deletion-icon {
			color: var(--ov-meet-text-hint);
		}
	}

	.auto-deletion-scheduled {
		font-weight: var(--ov-meet-font-weight-semibold);
		color: var(--ov-meet-color-warning);

		// border: 1px solid var(--ov-meet-color-error);
		.deletion-icon {
			color: var(--ov-meet-color-warning);
		}
	}
}

.no-data {
	color: var(--ov-meet-text-hint);
	font-style: italic;
}

// Action buttons
.action-buttons {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: var(--ov-meet-spacing-xs);

	.mat-mdc-icon-button {
		.mat-icon {
			@include ov-icon(sm);
		}

		&:hover {
			background-color: var(--ov-meet-surface-hover);
		}

		&.primary-action {
			color: var(--ov-meet-color-primary);
		}

		&.room-preferences-btn {
			color: var(--ov-meet-icon-settings);
		}

		&.copy-link-btn {
			color: var(--ov-meet-text-secondary);
		}

		&.view-recordings-btn {
			color: var(--ov-meet-icon-recordings);
		}

		&.delete-room-btn {
			color: var(--ov-meet-color-error);
		}
	}
}

// Menu item styles
.delete-action {
	color: var(--ov-meet-color-error) !important;

	.mat-icon {
		color: var(--ov-meet-color-error) !important;
	}
}

// Empty State Styling
.no-rooms-state {
	@include ov-card;
	text-align: center;
	margin: var(--ov-meet-spacing-xl) 0;

	.empty-content {
		max-width: 500px;
		margin: 0 auto;
	}

	.empty-icon {
		@include ov-icon(xl);
		color: var(--ov-meet-text-hint);
		margin-bottom: var(--ov-meet-spacing-lg);
		display: block;
	}

	h3 {
		font-size: var(--ov-meet-font-size-xl);
		font-weight: var(--ov-meet-font-weight-medium);
		color: var(--ov-meet-text-primary);
		margin: 0 0 var(--ov-meet-spacing-md) 0;
	}

	p {
		font-size: var(--ov-meet-font-size-md);
		color: var(--ov-meet-text-secondary);
		margin: 0 0 var(--ov-meet-spacing-xl) 0;
		line-height: var(--ov-meet-line-height-normal);
	}

	.getting-started-actions {
		display: flex;
		flex-direction: column;
		gap: var(--ov-meet-spacing-md);
		align-items: center;

		.create-room-btn {
			@include ov-button-base;

			mat-icon {
				@include ov-icon(md);
				margin-right: var(--ov-meet-spacing-sm);
			}
		}

		.refresh-rooms-btn {
			@include ov-button-base;

			mat-icon {
				@include ov-icon(md);
				margin-right: var(--ov-meet-spacing-sm);
			}
		}
	}
}

// Responsive design
@include ov-tablet-down {
	.rooms-table {
		.mat-mdc-header-cell,
		.mat-mdc-cell {
			padding: var(--ov-meet-spacing-sm) var(--ov-meet-spacing-xs);
		}

		.room-info .room-id,
		.date-info .date {
			font-size: var(--ov-meet-font-size-xs);
		}

		.date-info .time {
			font-size: var(--ov-meet-font-size-xxs);
		}
	}
}

@include ov-mobile-down {
	.rooms-table {
		font-size: var(--ov-meet-font-size-xs);

		.mat-mdc-header-cell {
			&.room-header {
				min-width: 150px;
			}

			&.actions-header {
				width: 80px;
			}
		}

		.mat-mdc-cell {
			&.room-cell {
				min-width: 150px;
			}

			&.actions-cell {
				width: 80px;
			}
		}
	}

	.action-buttons {
		.mat-mdc-icon-button {
			width: 28px;
			height: 28px;
			line-height: 28px;

			.mat-icon {
				font-size: 16px;
				width: 16px;
				height: 16px;
			}
		}
	}

	.no-rooms-state {
		padding: var(--ov-meet-spacing-xl) var(--ov-meet-spacing-lg);

		.empty-icon {
			font-size: var(--ov-meet-icon-size-xl);
			width: var(--ov-meet-icon-size-xl);
			height: var(--ov-meet-icon-size-xl);
		}

		h3 {
			font-size: var(--ov-meet-font-size-lg);
		}

		p {
			font-size: var(--ov-meet-font-size-sm);
		}
	}
}

// Focus states for accessibility
.mat-mdc-checkbox,
.mat-mdc-icon-button,
.mat-mdc-button {
	&:focus-visible {
		outline: 2px solid var(--ov-meet-color-primary);
		outline-offset: 2px;
	}
}

// Dark theme support (for future implementation)
@media (prefers-color-scheme: dark) {
	.rooms-table {
		.mat-mdc-row {
			&.selected-row {
				background-color: rgba(144, 202, 249, 0.12);

				&:hover {
					background-color: rgba(144, 202, 249, 0.16);
				}
			}
		}
	}
}
