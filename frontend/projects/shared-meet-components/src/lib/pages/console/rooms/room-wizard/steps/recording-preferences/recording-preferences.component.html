<div class="recording-preferences-step fade-in">
	<!-- Header Section -->
	<header class="step-header">
		<mat-icon class="ov-recording-icon step-icon">video_library</mat-icon>
		<div class="step-title-group">
			<h3 class="step-title">Recording Preferences</h3>
			<p class="step-description">Choose whether to enable recording capabilities for this room</p>
		</div>
	</header>

	<!-- Form Section -->
	<main class="step-content">
		<form [formGroup]="recordingForm" class="recording-form">
			<!-- Options Cards -->
			<div class="options-grid">
				@for (option of recordingOptions; track option.id) {
					<ov-selectable-card
						[option]="option"
						[selectedValue]="selectedValue"
						(optionSelected)="onOptionSelect($event)"
					></ov-selectable-card>
				}
			</div>

			<!-- Recording Access Selection (only when recording is enabled) -->
			@if (shouldShowAccessSection) {
				<div
					class="access-selection-section"
					[class.slide-in-from-top]="isRecordingEnabled && !isAnimatingOut"
					[class.slide-out-to-top]="isAnimatingOut"
				>
					<div class="access-header">
						<mat-icon class="access-icon">security</mat-icon>
						<div class="access-title-group">
							<h4 class="access-title">Recording Access Control</h4>
							<p class="access-description">Choose who can access and view the recordings</p>
						</div>
					</div>

					<mat-form-field appearance="outline" class="access-selector">
						<mat-label>Who can access recordings</mat-label>
						<mat-select formControlName="allowAccessTo">
							@for (accessOption of recordingAccessOptions; track accessOption.value) {
								<mat-option [value]="accessOption.value">
									<div class="access-option">
										<span class="access-desc">{{ accessOption.label }}</span>
									</div>
								</mat-option>
							}
						</mat-select>
					</mat-form-field>
				</div>
			}
		</form>
	</main>
</div>
