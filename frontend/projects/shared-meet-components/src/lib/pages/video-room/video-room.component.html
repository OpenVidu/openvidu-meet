@if (!showRoom) {
	<div class="form-container">
		<div class="card-wrapper">
			<mat-card class="form-card">
				<h2 class="form-title">
					Access room <strong>{{ roomId }}</strong>
				</h2>
				<form [formGroup]="participantForm" (ngSubmit)="submitAccessRoom()">
					<mat-form-field appearance="outline" class="full-width">
						<mat-label>Name</mat-label>
						<input
							id="participant-name-input"
							matInput
							placeholder="Enter your name"
							formControlName="name"
							required
						/>
						@if (participantForm.get('name')?.hasError('minlength')) {
							<mat-error> The name must be at least <strong>4 characters</strong> </mat-error>
						}
						@if (participantForm.get('name')?.hasError('required')) {
							<mat-error> The name is <strong>required</strong> </mat-error>
						}
						@if (participantForm.get('name')?.hasError('participantExists')) {
							<mat-error>
								The name is already taken. <strong> Please choose another name </strong>
							</mat-error>
						}
					</mat-form-field>

					<button
						mat-raised-button
						color="primary"
						id="participant-name-submit"
						class="full-width"
						[disabled]="participantForm.invalid"
					>
						Continue to room
					</button>
				</form>
			</mat-card>

			<mat-card class="recordings-card">
				<div class="recordings-content">
					<h3>View recordings</h3>
					<button id="view-recordings-btn" mat-stroked-button color="accent" (click)="goToRecordings()">
						Go to recordings
					</button>
				</div>
			</mat-card>
		</div>
	</div>
} @else {
	<ov-videoconference
		[token]="participantToken"
		[participantName]="participantName"
		[prejoin]="(features$ | async)?.showPrejoin ?? true"
		[prejoinDisplayParticipantName]="false"
		[videoEnabled]="(features$ | async)?.videoEnabled ?? true"
		[audioEnabled]="(features$ | async)?.audioEnabled ?? true"
		[toolbarCameraButton]="(features$ | async)?.showCamera ?? true"
		[toolbarMicrophoneButton]="(features$ | async)?.showMicrophone ?? true"
		[toolbarScreenshareButton]="(features$ | async)?.showScreenShare ?? true"
		[toolbarChatPanelButton]="(features$ | async)?.showChat ?? true"
		[toolbarRecordingButton]="(features$ | async)?.showRecording ?? true"
		[toolbarBroadcastingButton]="false"
		[toolbarBackgroundEffectsButton]="(features$ | async)?.showBackgrounds ?? true"
		[toolbarActivitiesPanelButton]="(features$ | async)?.showRecording ?? true"
		[activitiesPanelRecordingActivity]="(features$ | async)?.showRecording ?? true"
		[activitiesPanelBroadcastingActivity]="false"
		(onTokenRequested)="onTokenRequested()"
		(onParticipantConnected)="onParticipantConnected($event)"
		(onParticipantLeft)="onParticipantLeft($event)"
		(onRecordingStartRequested)="onRecordingStartRequested($event)"
		(onRecordingStopRequested)="onRecordingStopRequested($event)"
	>
	</ov-videoconference>
}
