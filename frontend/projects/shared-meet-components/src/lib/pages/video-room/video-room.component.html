@if (!showRoom) {
	<div class="form-container">
		<div class="card-wrapper">
			<mat-card class="form-card">
				<h2 class="form-title">
					Access room <strong>{{ roomId }}</strong>
				</h2>
				<form [formGroup]="participantForm" (ngSubmit)="accessRoom()">
					<mat-form-field appearance="outline" class="full-width">
						<mat-label>Name</mat-label>
						<input
							id="participant-name-input"
							matInput
							placeholder="Enter your name"
							formControlName="name"
							required
						/>
						@if (participantForm.get('name')?.hasError('minlength')) {
							<mat-error> The name must be at least <strong>4 characters</strong> </mat-error>
						}
						@if (participantForm.get('name')?.hasError('required')) {
							<mat-error> The name is <strong>required</strong> </mat-error>
						}
						@if (participantForm.get('name')?.hasError('participantExists')) {
							<mat-error>
								The name is already taken. <strong> Please choose another name </strong>
							</mat-error>
						}
					</mat-form-field>

					<button
						mat-raised-button
						color="primary"
						id="participant-name-submit"
						class="full-width"
						[disabled]="participantForm.invalid"
					>
						Continue to room
					</button>
				</form>
			</mat-card>

			<mat-card class="recordings-card">
				<div class="recordings-content">
					<h3>View recordings</h3>
					<button mat-stroked-button color="accent" (click)="goToRecordings()">Go to recordings</button>
				</div>
			</mat-card>
		</div>
	</div>
} @else {
	<ov-videoconference
		[token]="participantToken"
		[participantName]="participantName"
		[prejoin]="featureFlags.showPrejoin"
		[prejoinDisplayParticipantName]="false"
		[videoEnabled]="featureFlags.videoEnabled"
		[audioEnabled]="featureFlags.audioEnabled"
		[toolbarCameraButton]="featureFlags.showCamera"
		[toolbarMicrophoneButton]="featureFlags.showMicrophone"
		[toolbarScreenshareButton]="featureFlags.showScreenShare"
		[toolbarChatPanelButton]="featureFlags.showChat"
		[toolbarRecordingButton]="featureFlags.showRecording"
		[toolbarBroadcastingButton]="false"
		[toolbarBackgroundEffectsButton]="featureFlags.showBackgrounds"
		[toolbarActivitiesPanelButton]="true"
		[activitiesPanelRecordingActivity]="true"
		[activitiesPanelBroadcastingActivity]="false"
		(onTokenRequested)="onTokenRequested()"
		(onParticipantConnected)="onParticipantConnected($event)"
		(onParticipantLeft)="onParticipantLeft($event)"
		(onRecordingStartRequested)="onRecordingStartRequested($event)"
		(onRecordingStopRequested)="onRecordingStopRequested($event)"
	>
	</ov-videoconference>
}
